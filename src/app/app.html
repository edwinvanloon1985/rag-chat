<div class="app-shell">
    <app-conversations-sidebar
            class="chat-sidebar"
            [threads]="threads"
            [activeThreadId]="activeThreadId"
            (newThread)="startNewThread()"
            (openThread)="openThread($event)"
            (renameThread)="renameThread($event)"
            (deleteThread)="deleteThread($event)"
    ></app-conversations-sidebar>

    <main class="chat-main">
        <div class="top-container">
            <img src="assets/logo.png" alt="Logo" class="logo" />
        </div>

        <div class="chat-container" [class.is-empty]="!messages.length">
            <div class="message-container" autoScrollToBottom>
                @if (messages.length) {
                    @for (m of messages; track m.id) {
                        @if (m.role === 'bot') {
                            <div class="message-response">
                                <markdown [data]="m.content"></markdown>
                            </div>
                        }
                        @if (m.role === 'user') {
                            <div class="message-request">
                                <markdown [data]="m.content"></markdown>
                            </div>
                        }
                    }
                }
            </div>
        </div>

        <div class="bottom-container">
          <textarea
                  rows="1"
                  pTextarea
                  [(ngModel)]="userMessage"
                  (keydown.enter)="sendMessage(); $event.preventDefault()"
                  placeholder="Stel een vraagâ€¦"
                  class="chat-input"
          ></textarea>
        </div>
    </main>
</div>
